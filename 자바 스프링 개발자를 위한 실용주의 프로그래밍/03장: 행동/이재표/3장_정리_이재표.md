## 3장 [행동]

객체지향은 행동을 중심으로 설계를 해야한다. Car라는 객체를 볼때 두가지 경우로 설계하는 경우를 확인할수 있다.

1. 차에는 바퀴, 엔진, 유리가 있어
2. 차는 멈추고, 달릴수 있어야해

1번같은 경우는 데이터 중심으로 사고한것인데, 그러면 절차지향에서 구조체를 사용한것과 다르지 않게 된다. 

이는 자연스럽게 역할을 정의하는 것으로 이어지는데, ‘바퀴’, ‘엔진’, ‘유리’를 가진 것이 사실 우리 주변에 얼마나 많은가? 하지만 멈추고, 달리는 행동을 볼때 자연스럽게 탈것이라는 역할로 사고가 이어질수 있다.

### 덕 타이핑

> 어떤 새가 오리처럼 울고, 오리처럼 걷고, 오리처럼 먹는다면 나는 그 새를 오리라 부를 것이다.
> 

덕 타이핑은 위의 문구와 같이 행동이 같으면 같은 객체로 보겠다는 개념입니다.

타입스크립트의 경우 같은 행동(메서드)를 갖고 있다면 다른 필드가 있더라도, 상속이 가능합니다. 즉, 행동이 객체를 정의한다고 볼수 있습니다.

### 행동과 구현

```java
public class Car{
	private int degree;
	public void drive();
	public void changeDirection(float amout){
		float result=(degree+amout)%360;
		if(result<0){
			result+=360;
		}
		return resut;
	}
	...
}
```

자동차의 방향을 바꾸는 메서드를 구현해보았습니다! 구현을 고민하다보니 각도필드에 대한 필요성이 생각나 행동이 아닌 데이터 중심적인 사고를 하게되었습니다.

구현을 고민하게 되면 설계단계에서 데이터적인 사고로 자연스럽게 이동하게됩니다. 그러면 어떻게해야 행동에만 집중할까요? 이때 우리는 `인터페이스`를 사용하면 됩니다!

```java
public interface Car{
	void drive();
	void changeDirection(float amount);
	...
}
```

인터페이스를 통해 우리는 내부 구현은 신경쓰지 않고 해당 객체가 어떤 메시지를 처리할지 역할과 책임에만 신경쓸수 있게되었습니다.

### 인터페이스

인터페이스는 행동이 아니라. 인터페이스는 ‘외부에서 어떤 객체에게 행동을 시키고자 할때 메시지를 보낼수 있는 통로’입니다. 

외부에서 접근이 가능해야하기 때문에 인터페이스는 private 사용이 불가하고 public제어자가 기본입니다.

### 행동과 역할

보통 개발 초기에는 객체의 수가 적고, 인간의 사고는 역할보다 구현 중심적인 사고가 쉽기 때문에 구현에 치중될수 있다. 하지만 서비스가 발전해갈수록 구현 중심적인 코드는 확장이 어려워진다..! 왜냐하면 또 다른 구현이 필요한 경우 아예 다른 객체를 새로 만들어야하기 때문이다.

예로들면 이전의 자동차를 ‘탈것’이라는 역할을 아닌 구현만을 생각했다면 자전거가 나왔을때, 비행기가 나왔을때 확장이 어려워진다. 그러면 결국 분기를 통해 객체를 바꿔가며 구현해줬어야할지 모른다. 하지만 역할을 통해 ‘탈것’을 정의한다면 비행기, 자전거, 자동차가 모두 ‘탈것’에 호환되기 때문에 확장성 좋은 코드가 가능할 것이다.

**구현 중심적으로 설계했을때**

```java
clas User{
	public ride(String type, Object object){
		switch(type){
			case "CAR":
				((Car)object).ride();
				break;
			case "BICYCLE":
				((Bicycle))object).ride();
				break;
		}
	}
}
```

**역할 중심적으로 설계했을때**

```java
clas User{
	public ride(Vehicle vehicle){
		vehicle.ride();
	}
}
```

> 단순히 추상화를 하라는 것이 아닌 역할 중심적인 사고를 하라는 의미! 역할과 추상은 같은 말이 아니다!
> 

### 메서드

왜 객체지향 언어에서 메서드를 함수라 부르지 않을까?

함수는 입력값을 넣으면 출력이 나오는것을 의미한다. 하지만 메서드는 사실 어떤 구현이 실행될지 알수없다. 객체지향에서 객체들은 단순히 협력 객체에 메시지를 보낼뿐이지, 어떤 방법으로 일을 어떻게 처리할지는 협력 객체가 정하는 것이다. 

즉, 구현에 집착하면 함수를 사용하는 것에 지나지 않게 되기 때문에 각 객체들의 역할에 집중해야만 한다!
